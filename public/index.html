<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Poker Chips Manager</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.2/socket.io.js" integrity="sha512-YybopSVjZU0fe8TY4YDuQbP5bhwpGBE/T6eBUEZ0usM72IWBfWrgVI13qfX4V2A/W7Hdqnm7PIOYOwP9YHnICw==" crossorigin="anonymous"></script>
  
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  Poker Chips Manager

  <h1 id="pot">Pote: R$0,00</h1>

  <div id="bet-log"></div>

  <form id="bet-form" onsubmit="submitbet(event)">
    <input type="number" name="bet" placeholder="Valor da aposta" />
    <button type="submit">Enviar</button>
  </form>

  <script type="text/javascript">
    const PORT = 8080;
    var socket = io(`http://localhost:8080`);

    socket.on("state-update", function(state) {
      console.log(state);
      update(state);
    });

    function update(state) {
      console.log(state);
      const pot = document.getElementById("pot");
      pot.innerHTML = `Pote: R$${state.pot.toFixed(2)}`
    }

    function submitbet(event) {
      event.preventDefault();

      const bet = {
        id: 0,
        value: event.target[0].value,
      }
      console.log(bet);
      socket.emit("bet", bet);
    }
  </script>
</body>
</html>
